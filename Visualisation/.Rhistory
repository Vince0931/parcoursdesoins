va90_pla
class(va90_pla)
proj4string(va90a)
p4sva <- CRS(proj4string(va90a))
vaSP <- SpatialPolygons(va90_pla, proj4string = p4sva)
va90b <- SpatialPolygonsDataFrame(vaSP, data = as(va90a, "data.frame"))
x <- va90_pla[[1]]
x@hole
x
x
x
x[[1]]
class(x)
x@Polygons
x@Polygons
str(x)
x@Polygons[[1]]@hole
x <- va90[[1]]
x
x <- va90_pl[[1]]
x[[1]]
x
str(x)
?CRS
fichier
states <- readOGR(fichier,verbose = FALSE)
library(rgdal)
states <- readOGR(fichier,verbose = FALSE)
class(states)
states@proj4string
CRSargs()
CRSargs(communes)
projInfo
CRS()
CRS("")
CRS(as.character(NA))
CRS("+proj=longlat +datum=WGS84")
print(CRSargs(CRS("+proj=longlat +datum=NAD27")))
print(CRSargs(CRS("+init=epsg:4267")))
print(CRSargs(CRS("+init=epsg:26978")))
print(CRSargs(CRS(paste("+proj=sterea +lat_0=52.15616055555555",
"+lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel",
" +towgs84=565.237,50.0087,465.658,-0.406857,0.350733,-1.87035,4.0812 +units=m"))))
print(CRSargs(CRS("+init=epsg:28992")))
states@proj4string
make_EPSG()
EPSG <- make_EPSG()
View(EPSG)
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
any(bool)
EPSG_lambert <- subset (EPSG, bool)
View(EPSG_lambert)
View(voir)
EPSG_lambert$prj4[EPSG_lambert$code==2154]
EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
states@proj4string
View(EPSG_lambert)
states@proj4string %in% EPSG_lambert$prj4
states@proj4string
EPSG_lambert$prj4
as.character(states@proj4string)
states@proj4string@projargs
states@proj4string@projargs %in% EPSG_lambert$prj4
states@proj4string@projargs %in% EPSG$prj4
states@proj4string@projargs
EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93
RGF93prj4 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
communes <- readShapePoly(fichier, proj4string = RGF93prj4)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93prj4 <- CRS(RGF93)
RGF93prj4
communes <- readShapePoly(fichier, proj4string = RGF93prj4)
proj4string(communes)
class(communes)
voir2 <- communes@data
View(voir2)
df <- data.frame(X = 500820, Y = 6264958)
coordinates(df)
coordinates(df) <- ~X + ~Y
proj4string(df)
proj4string(df) <- RGF93prj4
coordinates(df) <- ~ X + Y
coordinates(df)
class(df)
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(spdfr, CRS("+proj=longlat +ellps=WGS84"))
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
dfwgs84
df
View(voir2)
class(test)
gCentroid(test)
gCentroid(test)
rgeos::gCentroid(test)
centroides <- rgeos::gCentroid(test)
plot(centroides)
plot(communes2)
plot(test)
points(centroides)
rm(list=ls())
EPSG <- make_EPSG()
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
EPSG_lambert <- subset (EPSG, bool)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93
RGF93prj4 <- CRS(RGF93)
RGF93prj4
RGF93prj4
df <- data.frame(X = 500820, Y = 6264958)
coordinates(df) <- ~ X + Y
class(df)
coordinates(df) <- ~ X + Y
class(df)
proj4string(df) <- RGF93prj4
proj4string(df)
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
dfwgs84
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
library(maptools)
communes <- readShapePoly(fichier,proj4string = RGF93prj4)
communes2 <- subset (communes, CODE_DEPT =="33")
communes3 <- unionSpatialPolygons(communes2, IDs = communes2$CODE_ARR)
plot(communes2)
plot(communes2) ## les communes de la Gironde
plot(communes3)
centroides <- rgeos::gCentroid(communes3)
points(centroides)
voir <- communes2@data
View(voir)
colnames(voir)
View(voir)
colnames(voir)
voir <- subset (voir, select=c("CODE_ARR"))
voir <- unique(voir)
arrondissement <- SpatialPolygonsDataFrame(communes2, voir)
arrondissement <- SpatialPolygonsDataFrame(communes3, voir)
rownames(voir)
communes3$`1`
communes3$`1`
communes3
rownames(voir) <- c(1:5)
rownames(voir) <- as.character(c(1:6))
arrondissement <- SpatialPolygonsDataFrame(communes3, voir)
centroides
communes3
centroides <- rgeos::gCentroid(arrondissement)
centroides
centroides <- rgeos::gCentroid(arrondissement,byid = T)
centroides
centroides <- rgeos::gCentroid(communes3,byid = T)
points(centroides)
rm(list=ls())
EPSG <- make_EPSG()
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
EPSG_lambert <- subset (EPSG, bool)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93prj4 <- CRS(RGF93)
df <- data.frame(X = 500820, Y = 6264958)
coordinates(df) <- ~ X + Y
class(df)
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
dfwgs84
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
library(maptools)
communes <- readShapePoly(fichier,proj4string = RGF93prj4)
dep33 <- subset (communes, CODE_DEPT =="33")
plot(dep33) ## les communes de la Gironde
arrond33 <- unionSpatialPolygons(dep33, IDs = dep33$CODE_ARR)
plot(arrond33) ### les arrondissements
centroides <- rgeos::gCentroid(arrond33,byid = T)
points(centroides)
rm(list=ls())
EPSG <- make_EPSG()
rm(list=ls())
library(rgdal)
library(maptools)
EPSG <- make_EPSG()
bool <- EPSG$code == 2154 & !is.na(EPSG$code)
RGF93 <- EPSG$prj4[bool]
RGF93prj4 <- CRS(RGF93)
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
communes <- readShapePoly(fichier,proj4string = RGF93prj4)
load("../geoPMSI/geoPMSIcommune.rdata")
dep33 <- subset (communes, CODE_DEPT =="33")
geoPMSIcommune33 <- subset (geoPMSIcommune, Code_commune_INSEE %in% dep33$INSEE_COM)
any(duplicated(geoPMSIcommune33$Code_commune_INSEE)) ## aucune commune appartient à plusieurs codes géo PMSI
dep33 <- merge (dep33, geoPMSIcommune, by.x="INSEE_COM",by.y="Code_commune_INSEE")
bool <- dep33$INSEE_COM %in% geoPMSIcommune$Code_commune_INSEE
length(unique(dep33test$Code_geo)) ### 94 codes géographiques en Gironde
length(unique(dep33$Code_geo)) ### 94 codes géographiques en Gironde
habitants <- tapply(dep33$POPULATION, as.character(dep33$Code_geo),sum)
boxplot(habitants)
habitants <- data.frame(Code_geo = names(habitants), habitants=as.numeric(habitants))
voir <- dep33@data
voir <- dep33@data
voir <- voir[with(voir,order(Code_geo,-POPULATION)),]
communesjoined <- tapply(voir$NOM_COM, as.character(voir$Code_geo), function(x){
paste (x, collapse=";")
})
communesjoined <- data.frame(Code_geo = names(communesjoined),
communes=as.character(communesjoined))
communesjoined <- communesjoined[order(communesjoined$Code_geo),]
codegeo <- merge (communesjoined, habitants,by="Code_geo")
geoPMSI33 <- unionSpatialPolygons(dep33, IDs = dep33$Code_geo)
plot(geoPMSI33)
centroides <- rgeos::gCentroid(geoPMSI33,byid = T)
points(centroides,col="red",pch=19)
rownames(codegeo) <- codegeo$Code_geo
geoPMSI33 <- SpatialPolygonsDataFrame(geoPMSI33, codegeo)
bool <- grepl(";",geoPMSI33$communes)
sum(bool) ## 64 codes géo composés d'au moins 2 communes
geoPMSI33$couleurs <- ifelse(bool, "orange","skyblue")
plot(geoPMSI33, col=geoPMSI33$couleurs)
load("../FINESS/locEtab.rdata")
locEtab33 <- subset (locEtab, substr(locEtab$INSEE_COM,1,2) == 33)
locEtab33CH <- subset (locEtab33, categetab == "355")
locEtab33CH <- subset (locEtab33, categetab == "355")
locEtab33CH$X <- as.numeric(as.character(locEtab33CH$X))
locEtab33CH$Y <- as.numeric(as.character(locEtab33CH$Y))
coordinates(locEtab33CH) <- ~ X + Y
class(locEtab33CH)
proj4string(locEtab33CH) <- RGF93prj4
points(locEtab33CH, col="blue",pch="19")
locEtab33CH
points(locEtab33CH, col="blue",pch="20")
coordinates(locEtab33CH)
points(locEtab33CH, col="red",pch="20")
plot(geoPMSIcommune33)
dev.off()
plot(geoPMSI33,col="#f2f2f2",lwd=0.1)
plot(geoPMSI33,col="#f2f2f2",lwd=0.1)
x0 <- 371348.5
y0 <- 6401264
x1 <- 412463.6
y1 <- 6455044
plot(geoPMSI33,col="#f2f2f2",lwd=0.1)
fleche <- arrows(x0, y0,x1,y1,length=0.1)
plot(geoPMSI33,col="#f2f2f2",lwd=0.1)
fleche <- arrows(x0, y0,x1,y1,length=0.1)
points(locEtab33CH,col="red",pch=18)
rm(list=ls())
library(rgdal)
library(maptools)
EPSG <- make_EPSG()
bool <- EPSG$code == 2154 & !is.na(EPSG$code)
RGF93 <- EPSG$prj4[bool]
RGF93prj4 <- CRS(RGF93)
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
communes <- readShapePoly(fichier,proj4string = RGF93prj4)
load("../geoPMSI/geoPMSIcommune.rdata")
dep33 <- subset (communes, CODE_DEPT =="33")
geoPMSIcommune33 <- subset (geoPMSIcommune, Code_commune_INSEE %in% dep33$INSEE_COM)
dep33 <- merge (dep33, geoPMSIcommune33, by.x="INSEE_COM",by.y="Code_commune_INSEE")
geoPMSIcommune33 <- NULL
bool <- dep33$INSEE_COM %in% geoPMSIcommune$Code_commune_INSEE
length(unique(dep33$Code_geo)) ### 94 codes géographiques en Gironde
bool <- dep33$INSEE_COM %in% geoPMSIcommune$Code_commune_INSEE
all(bool)
length(unique(dep33$Code_geo)) ### 94 codes géographiques en Gironde
habitants <- tapply(dep33$POPULATION, as.character(dep33$Code_geo),sum)
habitants <- tapply(dep33$POPULATION, as.character(dep33$Code_geo),sum)
boxplot(habitants)
habitants <- data.frame(Code_geo = names(habitants), habitants=as.numeric(habitants))
voir <- dep33@data
voir <- voir[with(voir,order(Code_geo,-POPULATION)),]
communesjoined <- tapply(voir$NOM_COM, as.character(voir$Code_geo), function(x){
paste (x, collapse=";")
})
communesjoined <- data.frame(Code_geo = names(communesjoined),
communes=as.character(communesjoined))
communesjoined <- communesjoined[order(communesjoined$Code_geo),]
codegeo <- merge (communesjoined, habitants,by="Code_geo")
habitants <- NULL
communesjoined <- NULL
EPSG <- NULL
voir <- NULL
geoPMSI33 <- unionSpatialPolygons(dep33, IDs = dep33$Code_geo)
plot(geoPMSI33)
centroides <- rgeos::gCentroid(geoPMSI33,byid = T)
points(centroides,col="red",pch=19)
rownames(codegeo) <- codegeo$Code_geo
geoPMSI33 <- SpatialPolygonsDataFrame(geoPMSI33, codegeo)
bool <- grepl(";",geoPMSI33$communes)
sum(bool) ## 64 codes géo composés d'au moins 2 communes
geoPMSI33$couleurs <- ifelse(bool, "orange","skyblue")
plot(geoPMSI33, col=geoPMSI33$couleurs)
load("../FINESS/locEtab.rdata")
load("../FINESS/locEtab.rdata")
locEtab33 <- subset (locEtab, substr(locEtab$INSEE_COM,1,2) == 33)
locEtab33CH <- subset (locEtab33, categetab == "355")
locEtab33CH$X <- as.numeric(as.character(locEtab33CH$X))
locEtab33CH$Y <- as.numeric(as.character(locEtab33CH$Y))
coordinates(locEtab33CH) <- ~ X + Y
class(locEtab33CH)
proj4string(locEtab33CH) <- RGF93prj4
x0 <- 371348.5
y0 <- 6401264
x1 <- 412463.6
y1 <- 6455044
plot(geoPMSI33,col="#f2f2f2",lwd=0.1)
fleche <- arrows(x0, y0,x1,y1,length=0.1)
plot(geoPMSI33, col=geoPMSI33$couleurs)
points(locEtab33CH,col="red",pch=18)
fleche <- arrows(x0, y0,x1,y1,length=0.1)
plot(test)
test <- 5
plot(test)
rm(list=ls())
library(rgdal)
library(maptools)
EPSG <- make_EPSG()
bool <- EPSG$code == 2154 & !is.na(EPSG$code)
RGF93 <- EPSG$prj4[bool]
RGF93prj4 <- CRS(RGF93)
fichier <- "GEOFLA_2-2_COMMUNE_SHP_LAMB93_FXX_2016-06-28/GEOFLA/1_DONNEES_LIVRAISON_2016-06-00236/GEOFLA_2-2_SHP_LAMB93_FR-ED161/COMMUNE/COMMUNE.shp"
communes <- readShapePoly(fichier,proj4string = RGF93prj4)
load("../geoPMSI/geoPMSIcommune.rdata")
dep33 <- subset (communes, CODE_DEPT =="33")
geoPMSIcommune33 <- subset (geoPMSIcommune, Code_commune_INSEE %in% dep33$INSEE_COM)
any(duplicated(geoPMSIcommune33$Code_commune_INSEE)) ## aucune commune appartient à plusieurs codes géo PMSI
dep33 <- merge (dep33, geoPMSIcommune33, by.x="INSEE_COM",by.y="Code_commune_INSEE")
geoPMSIcommune33 <- NULL
bool <- dep33$INSEE_COM %in% geoPMSIcommune$Code_commune_INSEE
all(bool) ### tous les codes insee geofla sont connues de la table geoPMSI
length(unique(dep33$Code_geo)) ### 94 codes géographiques en Gironde
habitants <- tapply(dep33$POPULATION, as.character(dep33$Code_geo),sum)
boxplot(habitants)
habitants <- data.frame(Code_geo = names(habitants), habitants=as.numeric(habitants))
rm(list=ls())
library(rgdal)
library(maptools)
EPSG <- make_EPSG()
bool <- EPSG$code == 2154 & !is.na(EPSG$code)
RGF93 <- EPSG$prj4[bool]
RGF93prj4 <- CRS(RGF93)
load("../CouchesPMSI/codesgeo2014/couchegeoPMSI2014.rdata")
dep33 <- subset (couchegeoPMSI2014, substr(couchegeoPMSI2014$codgeo,1,2) == 33)
plot(dep33)
centroides <- rgeos::gCentroid(dep33,byid = T)
points(centroides,col="red",pch=19)
load("../FINESS/locEtab.rdata")
locEtab$X <- as.numeric(as.character(locEtab$X))
locEtab$Y <- as.numeric(as.character(locEtab$Y))
coordinates(locEtab) <- ~ X + Y
proj4string(locEtab) <- RGF93prj4
locEtab33 <- subset (locEtab, substr(locEtab$INSEE_COM,1,2) == 33)
locEtab33CH <- subset (locEtab33, categetab == "355")
unv <- read.table("../FINESS/UNV/ars_metropole_unv_t.csv",sep=",",header=T,
fileEncoding = "ISO-8859-1")
bool <- unv$finess_site %in% locEtab$nofinesset
sum(bool) ## 3 unités UNV ne figurent pas dans locEtab !
bool <- locEtab33$nofinesset %in% unv$finess_site
sum(bool)
locEtab33UNV <- subset (locEtab33, bool)
class(locEtab33UNV)
points(locEtab33UNV,col="blue",pch=18)
locEtab33SSR <- subset (locEtab33, categetab == 109)
points(locEtab33SSR,col="green",pch=20)
x0 <- 371348.5
y0 <- 6401264
x1 <- 412463.6
y1 <- 6455044
fleche <- arrows(x0, y0,x1,y1,length=0.1)
points(locEtab33CH,col="blue",pch=18)
bool <- (couchegeoPMSI2014$libgeo == "ARES")
any(bool)
x0 <- couchegeoPMSI2014$x[bool]
y0 <- couchegeoPMSI2014$y[bool]
x1 <- 371348.5
y1 <- 6401264
arrows(x0, y0,x1,y1,length=0.1,lwd = 2)
locEtab33CH[1,]
x2 <- 417571.1
y2 <- 6418302
save(list = ls(),file="../Rapport/R/parcours.rdata")
save(list = c("dep33","centroides"),file="../Rapport/R/parcours.rdata")
save(list = c("dep33","centroides","locEtab33SSR","locEtab33UNV",
"x0","y0","x1","y1","x2","y2"),file="../Rapport/R/parcours.rdata")
rm(list=ls())
load("../CouchesPMSI/codesgeo2014/couchegeoPMSI2014.rdata")
couchegeoPMSI2014
couchegeoPMSI2014@proj4string
couchegeoPMSI2014 <- spTransform(couchegeoPMSI2014, CRS("+init=epsg:4326"))
leaflet(couchegeoPMSI2014) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2
)
library(leaflet)
leaflet(couchegeoPMSI2014) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2
)
dep33 <- subset (couchegeoPMSI2014, substr(couchegeoPMSI2014$codgeo,1,2) == 33)
dep33 <- spTransform(dep33, CRS("+init=epsg:4326"))
leaflet(dep33) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2
)
leaflet(dep33) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite"
)
leaflet(dep33) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",bg="white"
)
leaflet(dep33) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",bgcolor="white"
)
?addPolygons
leaflet(dep33) %>%
addPolygons(
stroke = FALSE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
?addPolygons
m <- leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
m
load("../Rapport/R/parcours.rdata")
couchegeoPMSI2014@proj4string
dep33 <- subset (couchegeoPMSI2014, substr(couchegeoPMSI2014$codgeo,1,2) == 33)
dep33@proj4string
m <- leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
m
df <- data.frame(X = x1, Y = y1)
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
coordinates(df) <- ~ X + Y
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
proj4string(df) <- RGF93prj4
EPSG <- make_EPSG()
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
EPSG_lambert <- subset (EPSG, bool)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
# création d'un objet CRS
RGF93prj4 <- CRS(RGF93)
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
dfwgs84
coordinates(dfwgs84)
coordinates(dfwgs84)$X
coordinates(dfwgs84)[1]
m <- addMarkers(m, lng=coordinates(dfwgs84)[1], lat=coordinates(dfwgs84)[2], popup="The birthplace of R")
m
m <- addMarkers(m, lng=coordinates(dfwgs84)[1], lat=coordinates(dfwgs84)[2], popup="UNV CH d'Arcachon")
m
?addPolygons
rm(list=ls())
EPSG <- make_EPSG()
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
EPSG_lambert <- subset (EPSG, bool)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93prj4 <- CRS(RGF93)
library(leaflet)
load("../CouchesPMSI/codesgeo2014/couchegeoPMSI2014.rdata")
load("../Rapport/R/parcours.rdata")
couchegeoPMSI2014@proj4string
dep33 <- subset (couchegeoPMSI2014, substr(couchegeoPMSI2014$codgeo,1,2) == 33)
dep33 <- spTransform(dep33, CRS("+init=epsg:4326"))
dep33@proj4string
m <- leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
df <- data.frame(X = x1, Y = y1)
coordinates(df) <- ~ X + Y
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
coordinates(df) <- ~ X + Y
m <- addMarkers(m, lng=coordinates(dfwgs84)[1], lat=coordinates(dfwgs84)[2], popup="UNV CH d'Arcachon")
m
rm(list=ls())
EPSG <- make_EPSG()
bool <- grepl("Lambert",EPSG$note,ignore.case = T)
EPSG_lambert <- subset (EPSG, bool)
RGF93 <- EPSG_lambert$prj4[EPSG_lambert$code==2154 & !is.na(EPSG_lambert$code)]
RGF93prj4 <- CRS(RGF93)
library(leaflet)
load("../CouchesPMSI/codesgeo2014/couchegeoPMSI2014.rdata")
load("../Rapport/R/parcours.rdata")
dep33 <- subset (couchegeoPMSI2014, substr(couchegeoPMSI2014$codgeo,1,2) == 33)
dep33 <- spTransform(dep33, CRS("+init=epsg:4326"))
m <- leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="antiquewhite",fillColor="white"
)
m
m <- leaflet(dep33) %>%
addPolygons(
stroke = TRUE, fillOpacity = 2, smoothFactor = 2,color ="black",fillColor="white"
)
m
df <- data.frame(X = x1, Y = y1)
coordinates(df) <- ~ X + Y
proj4string(df) <- RGF93prj4
dfwgs84 <- spTransform(df, CRS("+proj=longlat +ellps=WGS84"))
m <- addMarkers(m, lng=coordinates(dfwgs84)[1], lat=coordinates(dfwgs84)[2], popup="UNV CH d'Arcachon")
m
